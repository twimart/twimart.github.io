[{"content":"Intro Dans ce TP, nous allons r√©alisier la configuration du r√©seau de la \u0026ldquo;Maison des Ligues\u0026rdquo;, un b√¢timent qui accueil les diff√©rentes ligues sportives de la r√©gion Lorraine.\nLes diff√©rentes missions On va devoir configurer ce r√©seau, et pour cela plusieurs missions sont n√©cessaires¬†:\nIl va falloir segmenter le r√©seau, r√©fl√©chir au nombre de VLAN qu‚Äôil faut attribuer, aux IP‚Ä¶\nOn va ensuite devoir donner un configuration basique au √©quipements, de mani√®re √† ce qu‚Äôil s puissent se ¬´¬†ping¬†¬ª entre eux.\nOn va devoir mettre en place un serveur NTP, afin de synchroniser l‚Äôheure des √©quipements.\nMettre en place une solution de sauvegarde des configurations des √©quipements via TFTP sera fortement recommand√©.\nOn devra aussi mettre en place un serveur Syslog, pour enregistrer les logs des √©quipements.\n-La cr√©ation d‚ÄôACL sera aussi une √©tape cl√© de ce projet, afin que note r√©seau puisse avoir un acc√®s Internet. On pensera a adapter les ACL pour la DMZ.\nla suite des missions arrive plus tard! üòä\n1ere mission¬†: segmentation du r√©seau On va ici d√©finir la segmentation de notre r√©seau, c‚Äôest √† dire qu‚Äôon va d√©finir le nombre de VLAN, ainsi que leur plage d‚Äôadresse.\nOn va tout d‚Äôabord cr√©er 80 VLAN, chacun de 32 adresses, qui seront adaptable en fonction du nombre de ligues pr√©sente dans le b√¢timent gr√¢ce a VLSM. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Ligues\u0026rdquo; 80 VLANs de 32 adresses 172.16.0.1/27 - 172.16.9.254/27 On va ensuite faire un VLAN pour le Wifi public. On va pr√©voir un grand nombre d‚Äôadresses au cas ou, avec 4 096 adresses disponible dans ce VLAN. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Wifi Publique\u0026rdquo; 1 VLAN de 4096 adresses 172.16.16.1/20 ‚Äì 172.16.31.254/20 On va cr√©er un VLAN ¬´¬†Administration¬†¬ª, de 27 adresses. Il sera r√©serv√© pour la salle d‚Äôadministration. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Administration\u0026rdquo; 1 VLAN de 27 adresses 172.16.10.1/27 ‚Äì 172.16.10.30/27 Il y a une salle de reprographie dans le b√¢timent. On va cr√©er un VLAN de 32 adresses pour cette pi√®ce. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Reprographie\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.33/27 ‚Äì 172.16.10.62/27 Pour la salle Multim√©dia, on va aussi faire un VLAN de 32 adresses. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Multim√©dia\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.65/27 ‚Äì 172.16.10.94/27 Pour l‚ÄôAmphith√©√¢tre, la salle de r√©union, et la salle de convivialit√©, un VLAN filaire public sera n√©cessaire. 32 adresses seront suffisantes pour ce VLAN. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Filaire Public\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.97/27 - 172.16.10.126/27 Il y a des ecrans qui affichent des informations dans les couloirs. On va donc leurs cr√©er un VLAN sp√©cifique, 32 addresses seront largement suffisantes. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Ecrans\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.129/27 - 172.16.10.12/27 On va aussi evdemment cr√©er un VLAN sp√©cifique pour la serveurs de la DMZ, de 32 addresses. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;DMZ\u0026rdquo; 1 VLAN de 32 adresses 10.54.0.1/16 - 10.54.0.31/16 Et enfin un dernier VLAN \u0026ldquo;Management\u0026rdquo;, qui nous permettra d\u0026rsquo;administrer les divers √©quipements d\u0026rsquo;inter-connexion. 32 addresses devrait suffire. Nom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Management\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.193/27 172.16.10.222/27 Et voila pour la segmentation de notre r√©seau!\nVoila un tableau de tout les VLANs pour r√©sumer:\nNom du VLAN Nombres de VLAN et d\u0026rsquo;adresses disponnible Plage d\u0026rsquo;adresses VLAN \u0026ldquo;Ligues\u0026rdquo; 80 VLANs de 32 adresses 172.16.0.1/27 - 172.16.9.254/27 VLAN \u0026ldquo;Wifi Publique\u0026rdquo; 1 VLAN de 4096 adresses 172.16.16.1/20 ‚Äì 172.16.31.254/20 VLAN \u0026ldquo;Administration\u0026rdquo; 1 VLAN de 27 adresses 172.16.10.1/27 ‚Äì 172.16.10.30/27 VLAN \u0026ldquo;Reprographie\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.33/27 ‚Äì 172.16.10.62/27 VLAN \u0026ldquo;Multim√©dia\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.65/27 ‚Äì 172.16.10.94/27 VLAN \u0026ldquo;Filaire Public\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.97/27 - 172.16.10.126/27 VLAN \u0026ldquo;Ecrans\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.129/27 - 172.16.10.12/27 VLAN \u0026ldquo;DMZ\u0026rdquo; 1 VLAN de 32 adresses 10.54.0.1/16 - 10.54.0.31/16 VLAN \u0026ldquo;Management\u0026rdquo; 1 VLAN de 32 adresses 172.16.10.193/27 172.16.10.222/27 2i√®me mission¬†: Configuration des √©quipements et serveur NTP Nous allons maintenant configurer les √©quipements d\u0026rsquo;interconnexion, c\u0026rsquo;est-√†-dire les switch et les routeurs. Il nous faudra aussi cr√©er un serveur NTP et synchronyser nos divers √©quipements.\nOn commence par donner un nom explicite √† nos machines. Voir comment faire ici.\nOn devra cr√©er une banni√®re de connexion pour les √©quipements. Voir comment faire ici.\nPuis on s\u0026rsquo;occupera de cr√©er un serveur NTP et de d√©finir les machines d\u0026rsquo;interconnexion comme clientes de ce serveur. Voir comment faire ici.\n","permalink":"https://www.thomaswimart.fr/fr/notes/m2l/","summary":"Intro Dans ce TP, nous allons r√©alisier la configuration du r√©seau de la \u0026ldquo;Maison des Ligues\u0026rdquo;, un b√¢timent qui accueil les diff√©rentes ligues sportives de la r√©gion Lorraine.\nLes diff√©rentes missions On va devoir configurer ce r√©seau, et pour cela plusieurs missions sont n√©cessaires¬†:\nIl va falloir segmenter le r√©seau, r√©fl√©chir au nombre de VLAN qu‚Äôil faut attribuer, aux IP‚Ä¶\nOn va ensuite devoir donner un configuration basique au √©quipements, de mani√®re √† ce qu‚Äôil s puissent se ¬´¬†ping¬†¬ª entre eux.","title":"Projet de configuration d'un r√©seau"},{"content":"‚ö† J\u0026rsquo;utilise une machine Debian pour mon serveur TFTP, les commandes pr√©sent√©s ne sont donc valide que pour Linux.\nA faire sur votre serveur Sur une machine Debian 10, installer un serveur TFTP:\nsudo -s apt install xinetd tftpd tftp Une fois le service install√©, il faut cr√©er le fichier de configuration :\nnano /etc/xinetd.d/tftp et ajouter les lignes suivantes dans le fichier :\nservice tftp { protocol = udp port = 69 socket_type = dgram wait = yes user = nobody server = /usr/sbin/in.tftpd server_args = /tftpboot disable = no } Maintenant, il faut cr√©er un r√©pertoire du nom de /tftpboot √† la racine et on pensera √† lui donner des droits :\nsudo mkdir /tftpboot sudo chmod -R 777 /tftpboot sudo chown -R nobody /tftpboot Ensuite il faut red√©marrer le service :\nsudo /etc/init.d/xinetd restart Techniquement, votre serveur est pr√™t! Mais on va aller plus loin dans ce tuto: en effet le but est ici de faire un serveur capable de sauvegarder la configuration d\u0026rsquo;appareil (comme des switch ou des routeurs).\nOn va donc cr√©er un fichier qui contiendra la configuration de notre appareil (ici, ce sera \u0026ldquo;SwitchToto\u0026rdquo;):\ntouch /tftpboot/SwitchToto On pense √† lui donner des droits:\nchmod 777 /tftpboot/SwitchToto A faire sur votre √©quipement SwitchToto\u0026gt; en SwitchToto\u0026gt; copy running-config tftp Cette commande vous posera 2 question:\n1- L\u0026#39;adresse IP du serveur TFTP 2- La destination du fichier de configuration, soit /tftpboot/SwitchToto Et un fichier de configuration ira se stocker sur votre serveur TFTP!\nMerci √† Enzo Ribeiro pour son aide!\n","permalink":"https://www.thomaswimart.fr/fr/notes/tftp/","summary":"‚ö† J\u0026rsquo;utilise une machine Debian pour mon serveur TFTP, les commandes pr√©sent√©s ne sont donc valide que pour Linux.\nA faire sur votre serveur Sur une machine Debian 10, installer un serveur TFTP:\nsudo -s apt install xinetd tftpd tftp Une fois le service install√©, il faut cr√©er le fichier de configuration :\nnano /etc/xinetd.d/tftp et ajouter les lignes suivantes dans le fichier :\nservice tftp { protocol = udp port = 69 socket_type = dgram wait = yes user = nobody server = /usr/sbin/in.","title":"Cr√©er un serveur TFTP et sauvegarder et restaurer les configuration des √©quipements"},{"content":"‚ö† J\u0026rsquo;utilise une machine Debian pour mon serveur Chrony, les commandes pr√©sent√©s ne sont donc valide que pour Linux.\nA faire sur votre serveur (Linux ou Windows) Tout d\u0026rsquo;abord, installer Chrony:\nsudo -s apt install chrony On peut ensuite v√©rifier le contenu du fichier \u0026ldquo;chrony.conf\u0026rdquo;\nnano /etc/chrony/chrony.conf Ensuite nous devons d√©clarer nos pool NTP. Nous allons nous rendre √† la ligne 3 du fichier pour faire quelques modification :\npool 2.debian.pool.ntp.org iburst\ndevient:\n#pool 2.debian.pool.ntp.org iburst\net maintenant nous pouvons ajouter nos pools en entrant les lignes suivantes √† la place :\nserver 0.fr.pool.ntp.org server 1.fr.pool.ntp.org server 2.fr.pool.ntp.org server 3.fr.pool.ntp.org Une fois cela fait on va pouvoir se rendre un peut plus bas pour v√©rifier l\u0026rsquo;existance (ou non) des lignes suivantes:\n# This directive specify the file into which chronyd will store the rate # information. driftfile /var/lib/chrony/chrony.drift local stratum 8 manual allow 172.25 Si ces lignes ne sont pas pr√©sentes, il faudra les modifier comme ci-dessus.\nLe local stratum 8 d√©clare la \u0026ldquo;couche\u0026rdquo; de notre serveur NTP. Pour terminer cette installation il faut lancer le serveur.\nsystemctl start chrony on v√©rifie que le service s\u0026rsquo;est lanc√© correctement :\nsystemctl status chrony Et enfin la commande qui sert √† activer le service √† chaque fois que la machine est allum√©e :\nsystemctl enable chrony A faire sur votre √©quipement (ici ce sera un switch Cisco) Article tir√© de IT-Connect.fr, par Florian Burnel\nPour le moment, le routeur n\u0026rsquo;est pas synchronis√© via le serveur NTP, on peut consulter l\u0026rsquo;heure actuelle gr√¢ce √† la commande \u0026ldquo;show clock\u0026rdquo;, on remarque que l\u0026rsquo;heure n\u0026rsquo;est pas bonne du tout\u0026hellip;\nSwitchToto#show clock *0:8:8.942 UTC Mon Mar 1 1993 Passons √† la configuration, tr√®s simple puisqu\u0026rsquo;il suffit d\u0026rsquo;indiquer l\u0026rsquo;adresse du serveur NTP. Voici la proc√©dure de configuration :\nSwitchToto#configure terminal Enter configuration commands, one per line. End with CNTL/Z. SwitchToto(config)#ntp server 192.168.1.10 SwitchToto(config)#exit On peut v√©rifier que notre switch est bien associ√© au serveur ntp:\nSwitchToto#show ntp association Affichez √† nouveau la date et l\u0026rsquo;heure, normalement elle doit √™tre actualis√©e :\nRouter#show clock *11:51:11.134 UTC Fri Jan 1 2023 Et vos √©quipements sont bien synchronis√© entre eux!\nMerci √† Enzo Ribeiro pour son aide. üòä\n","permalink":"https://www.thomaswimart.fr/fr/notes/ntp/","summary":"‚ö† J\u0026rsquo;utilise une machine Debian pour mon serveur Chrony, les commandes pr√©sent√©s ne sont donc valide que pour Linux.\nA faire sur votre serveur (Linux ou Windows) Tout d\u0026rsquo;abord, installer Chrony:\nsudo -s apt install chrony On peut ensuite v√©rifier le contenu du fichier \u0026ldquo;chrony.conf\u0026rdquo;\nnano /etc/chrony/chrony.conf Ensuite nous devons d√©clarer nos pool NTP. Nous allons nous rendre √† la ligne 3 du fichier pour faire quelques modification :\npool 2.","title":"Cr√©er un serveur NTP avec Chrony et synchroniser ses √©quipements "},{"content":"Je pr√©cise que j\u0026rsquo;utilise Vmware Worksation 16 Pro. L\u0026rsquo;installation d\u0026rsquo;un machine virtuelle (VM) se d√©roule de la m√™me mani√®re si vous utilisez la version Player.\nT√©l√©charger une image iso Rendez-vous sur la page de t√©l√©chargement du syst√®me d\u0026rsquo;exploitaion d√©sir√©. Dans cet exemple, on va choisir Linux Ubuntu.\nCr√©er la VM Sur Vmware, appuyer sur \u0026ldquo;Create a new virtual machine\u0026rdquo;:\nUn assistant de cr√©ation de machine virtuelle apparait. S√©lectionnez \u0026ldquo;Typical\u0026rdquo;, puis \u0026ldquo;Next\u0026rdquo;:\nChoisissez l\u0026rsquo;option \u0026ldquo;Installer disc image file (iso), puis s√©lectonnez le ficher .iso que vous venez de t√©l√©charger, puis \u0026ldquo;Next\u0026rdquo;.\n‚ö†Ô∏è Attention! La fen√™tre qui suit peut ne pas appara√Ætre lors de la cr√©ation de votre VM. Pas de panique! C\u0026rsquo;est une fonctionnalit√© qui n\u0026rsquo;est support√© que par quelques OS mais √ßa ne change en rien l\u0026rsquo;installation.\nLinux Ubuntu supporte \u0026ldquo;Easy Install\u0026rdquo;. Gr√¢ce √† cela, nous pouvons rentrer les information de login et de mot de passe lors de la cr√©ation de la VM.\nVous pouvez ensuite changer le nom de votre machine.\nPersonnellement, pour les options de stockage, je laisse les param√®tres par d√©fault:\nSur cette fen√™tre, vous avez la possiblit√© de modifier les ressource allou√© √† cette VM. L√† encrore, je laisse par d√©faut. Vous pouvez appuyer sur \u0026ldquo;Finish\u0026rdquo; pour d√©marrer la machine.\nEt nous nous retrouvons finalement sur notre machine virtuelle! ü§©\n","permalink":"https://www.thomaswimart.fr/fr/notes/vmware/","summary":"Je pr√©cise que j\u0026rsquo;utilise Vmware Worksation 16 Pro. L\u0026rsquo;installation d\u0026rsquo;un machine virtuelle (VM) se d√©roule de la m√™me mani√®re si vous utilisez la version Player.\nT√©l√©charger une image iso Rendez-vous sur la page de t√©l√©chargement du syst√®me d\u0026rsquo;exploitaion d√©sir√©. Dans cet exemple, on va choisir Linux Ubuntu.\nCr√©er la VM Sur Vmware, appuyer sur \u0026ldquo;Create a new virtual machine\u0026rdquo;:\nUn assistant de cr√©ation de machine virtuelle apparait. S√©lectionnez \u0026ldquo;Typical\u0026rdquo;, puis \u0026ldquo;Next\u0026rdquo;:","title":"Cr√©er une machine virtuelle avec Vmware"},{"content":"Dans cette note, nous allons voir comment installer un serveur proxy, en utilisant Pfsense et Squid. On utilisera des machines virtuelles, cr√©√©es sous le logiciel Vmware Workstation 16 Pro.\nLes diff√©rentes parties qui composent ce tutoriel:\nPart-1 Part-2 Part-3 Part-4 Part-5 Topologie de notre r√©seau Voila la topologie du r√©seau que nous allons utiliser dans ce tuto:\nPour acc√©der √† Internet, le \u0026ldquo;PC1\u0026rdquo; passera par le routeur \u0026ldquo;Pfsense\u0026rdquo;, afin de sortir du r√©seau local \u0026ldquo;LAN\u0026rdquo;. Ici la subtilit√© est que si \u0026ldquo;PC1\u0026rdquo; veut acc√©der √† certaines page web, ses requ√™tes passeront d\u0026rsquo;abord par notre serveur proxy \u0026ldquo;Squid\u0026rdquo;.\n\u0026ldquo;Squid\u0026rdquo; pourra alors bloquer certaines pages web ou encore enregistrer certaines donn√©es dans sont cache afin d\u0026rsquo;am√©liorer les performances.\nJe pr√©cise que ce sh√©ma ne sert que d\u0026rsquo;illustration, Pfsense et Squid ne forment en r√©alit√© qu\u0026rsquo;une seule machine dans notre cas.\nCr√©ation des machines virtuelles Sur la page de t√©l√©chargement de Pfsense, t√©l√©charger l\u0026rsquo;iso de notre futur routeur virtuel. Je pr√©cise que vous allez obtenir fichier .gz, vous devez extraire ce fichier sur votre ordinateur.\nT√©l√©chargez aussi l\u0026rsquo;iso d\u0026rsquo;une VM, pour PC1. Personnellement, je vais utiliser une distribution Linux Ubuntu, qui fera amplement l\u0026rsquo;affaire, mais vous √™tes libre d\u0026rsquo;utiliser n\u0026rsquo;importe quel OS que vous maitrisez.\nEnsuite, sur Vmware, vous pouvez cr√©er les machines virtuelles (vous pouvez mon suivre mon tutoriel ici.)\nParam√©trage des machines virtuelles Une fois les machines cr√©√©es, on va devoir modifier leurs param√®tres. En effet, notre routeur Pfsense poss√®de 2 interfaces: une LAN et une WAN. On va donc devoir lui en ajouter une, et les param√©trer corectement.\n‚ö†Ô∏è Il faut que votre ordinateur soit connect√© √† Internet.\nAllez dans les param√®tres de la VM: Appuyez sur \u0026ldquo;Add\u0026rdquo;: S√©lectionnez \u0026ldquo;Network Adaptater\u0026rdquo;, puis \u0026ldquo;Finish\u0026rdquo;: On va maintenant param√©trer nos deux interfaces. Appuyez sur la premi√®re, puis sur \u0026ldquo;Advanced\u0026rdquo; Appuyer sur \u0026ldquo;Generate\u0026rdquo;, et notez bien (si, si, j\u0026rsquo;insiste) les deux derniers octets de l\u0026rsquo;addresse MAC qui vient d\u0026rsquo;√™tre g√©n√©r√©e. C\u0026rsquo;est normal de ne pas avoir la m√™me valeur que moi üòâ . Puis \u0026ldquo;OK\u0026rdquo;. Ensuite, appuyez sur le bouton \u0026ldquo;Lan Segments\u0026rdquo;: On va cr√©er un nouveau segment LAN. Cliquez sur \u0026ldquo;Add\u0026rdquo;, donner lui le nom que vous voulez, puis \u0026ldquo;OK\u0026rdquo;. Enfin, toujours sur la premi√®re interface, dans la section \u0026ldquo;Network Connection\u0026rdquo;, s√©lectionnez LAN segment, puis choisissez le segment LAN que vous venez de cr√©er. Nous venons ici de preciser que la premi√®re interface fera partie du LAN.\nPour la deuxi√®me interface de notre routeur Pfsense, r√©p√©tez la 4i√®me et 5i√®me √©tape de configuration de la premi√®re interface. Puis s√©lelectionnez \u0026ldquo;Bridged\u0026rdquo;, et \u0026ldquo;OK\u0026rdquo; (en bas √† droite).\nNotre machine virtuelle Pfsense est maintenant pr√™te √† d√©marrer!\n‚ö†Ô∏èPensez aussi √† configurer la machine \u0026ldquo;PC1\u0026rdquo;. Pour cela, choisissez le \u0026ldquo;Network Adaptater\u0026rdquo; de votre VM, puis l√† encore s√©lectionnez \u0026ldquo;LAN segment\u0026rdquo;, en choisissant le segement LAN que vous mis pour la premi√®re interface du routeur Pfsense:\nVous pouvez alors d√©marrer votre machine Pfsense.\nLa suite du tutoriel se trouve ‚û°Ô∏è ici ‚¨ÖÔ∏è.\n","permalink":"https://www.thomaswimart.fr/fr/notes/proxy/","summary":"Dans cette note, nous allons voir comment installer un serveur proxy, en utilisant Pfsense et Squid. On utilisera des machines virtuelles, cr√©√©es sous le logiciel Vmware Workstation 16 Pro.\nLes diff√©rentes parties qui composent ce tutoriel:\nPart-1 Part-2 Part-3 Part-4 Part-5 Topologie de notre r√©seau Voila la topologie du r√©seau que nous allons utiliser dans ce tuto:\nPour acc√©der √† Internet, le \u0026ldquo;PC1\u0026rdquo; passera par le routeur \u0026ldquo;Pfsense\u0026rdquo;, afin de sortir du r√©seau local \u0026ldquo;LAN\u0026rdquo;.","title":"Cr√©er un serveur proxy avec Pfsense et Squid "},{"content":"Cr√©ation de noms d\u0026rsquo;utilisateurs, de domaines, et de cl√©s (Nous prenons ici l\u0026rsquo;exemple d\u0026rsquo;un router Cisco.)\nTout d\u0026rsquo;abord, si √ßa n\u0026rsquo;est pas d√©ja fait, donner un nom personnalis√© ainsi qu\u0026rsquo;un nom de domaine DNS √† votre appareil:\nRouter(config)# hostname Toto Toto(config)# ip domain-name exemple.com (si vous voulez faire votre propre serveur DNS Linux, j\u0026rsquo;ai fait un tuto ici )\nPensez √† s√©curiser le mode privil√©gi√© de votre appareil !\nToto(config)# enable secret \u0026lt;mot_de_passe\u0026gt; Ensuite, nous devons dire √† notre routeur (ou switch) de g√©n√©rer une paire de cl√©s asym√©trique (n√©cessaire √† la connexion SSH). Il faut aussi chiffrer ces cl√©s, on va pour cela utiliser le protocole RSA:\nToto(config)# crypto key generate rsa On va ensuite nous demander la taille voulu de la cl√©. Personnellement je met 1024 bits.\nThe name for the keys will be: Toto.exemple.com Choose the size of the key modulus in the range of 360 to 2048 for your General Purpose Keys. Choosing a key modulus greater than 512 may take a few minutes. How many bits in the modulus [512]: 1024 % Generating 1024 bit RSA keys, keys will be non-exportable. . . [OK] Toto(config)# On va maintenant cr√©er un utilisateur, c\u0026rsquo;est avec ses logins que l\u0026rsquo;on pourra se connecter au routeur (ou switch) √† distance. Ici, j\u0026rsquo;ai mis thomas pour le username et admin pour le mot de passe, mais vous mettrez √©videmment les valeurs que vous voulez.\nToto(config)# username thomas password admin Activation du protocole SSH On peut maintenant activer le protocole SSH sur notre routeur (ou switch):\nToto(config)# ip ssh version 2 Petite parenth√®se sur les commandes qui vont suivre Pour se connecter sur appareil √† distance, il y a deux protocoles principaux: Telnet et SSH. Telnet est un protocole simple qui fonctionne bien, mais qui n\u0026rsquo;est pas du tout s√©curis√© et crypt√©: c\u0026rsquo;est √† dire que n\u0026rsquo;importe qui peut intercepter les trames de communication entre vous et l\u0026rsquo;appareil.\nSSH est quand lui crypt√© (gr√¢ce aux cl√©s que nous avons g√©n√©r√© plus t√¥t). La norme veut donc que l\u0026rsquo;on force notre switch √† ne communiquer qu\u0026rsquo;en SSH, et que la connexion en Telnet soit impossible (pour plus de s√©curit√©).\nC\u0026rsquo;est ce que l\u0026rsquo;on va faire maintenant.\nOn va d\u0026rsquo;abord forcer notre switch √† n\u0026rsquo;accepter que la communication entrante en SSH:\nToto(config)# line vty 0 4 Toto(config)# login local Toto(config-line)# transport input ssh Puis on fait de m√™me pour la communication sortante:\nToto(config-line)# transport output ssh Maintenant, on peut v√©rifier les changement de configuration:\nToto# show running-config N\u0026rsquo;oubliez pas de sauvegarder la nouvelle configuration !\nToto# copy running-config startup-config Test de connexion (avec PuTTy) PuTTy est un logiciel gratuit qui permet de se connecter √† un appareil de plein de mani√®res diff√©rentes: c√¢ble s√©rie, Telnet, SSH\u0026hellip; Vous pouvez donc s√©lectionner SSH, puis rentrer l\u0026rsquo;addresse IP de votre appareil Cisco (la mienne √©tait 192.168.100.33): On va alors vous demander un username. Vous pouvez mettre celui que vous avez cr√©√© pr√©c√©demment (dans mon cas thomas). Ensuite vous pouvez rentrer le mot de passe correspondant √† cet utilisateur (pour moi c\u0026rsquo;est donc admin).\nEt vous √™tes enfin connect√© !\nUn mot de passe vous sera demand√© si vous voulez rentrer en mode privil√©gi√©. C\u0026rsquo;est celui que vous avez mis lors de la commande enable secret \u0026lt;mot_de_passe\u0026gt;\nC\u0026rsquo;est tout pour la connexion SSH sur Cisco üòÅ!\n","permalink":"https://www.thomaswimart.fr/fr/notes/cisco-ssh/","summary":"Cr√©ation de noms d\u0026rsquo;utilisateurs, de domaines, et de cl√©s (Nous prenons ici l\u0026rsquo;exemple d\u0026rsquo;un router Cisco.)\nTout d\u0026rsquo;abord, si √ßa n\u0026rsquo;est pas d√©ja fait, donner un nom personnalis√© ainsi qu\u0026rsquo;un nom de domaine DNS √† votre appareil:\nRouter(config)# hostname Toto Toto(config)# ip domain-name exemple.com (si vous voulez faire votre propre serveur DNS Linux, j\u0026rsquo;ai fait un tuto ici )\nPensez √† s√©curiser le mode privil√©gi√© de votre appareil !\nToto(config)# enable secret \u0026lt;mot_de_passe\u0026gt; Ensuite, nous devons dire √† notre routeur (ou switch) de g√©n√©rer une paire de cl√©s asym√©trique (n√©cessaire √† la connexion SSH).","title":"Etablir une connexion SSH sur un appareil Cisco"},{"content":"Installer Bind9 :\nsudo apt-get install bind9\nLes fichiers de configuration de Bind9 sont dans /etc/bind/\ncd /etc/bind/ Tout d‚Äôabord, on met cet 3 lignes dans le fichier named.conf :\ninclude \u0026#34;/etc/bind/named.conf.options\u0026#34;; include \u0026#34;/etc/bind/named.conf.local\u0026#34;; include \u0026#34;/etc/bind/named.conf.default-zones\u0026#34;; -Dans le fichier de configuration de bind9 ¬´ named.conf.local ¬ª, d√©clarer ses zones :\nzone \u0026#34;example.com\u0026#34; { type master; file \u0026#34;/etc/bind/db.example.com\u0026#34;; }; ‚Üí La ligne \u0026ldquo;file\u0026rdquo; pr√©cise que la configuration de notre zone example.com se fera dans le fichier ¬´ db.example.com ¬ª\nDans db.example.com, on configure sa zone (l‚ÄôIP de mon serveur DNS est 192.168.1.15 ):\n; ; BIND data file for example.com ; $TTL 604800 @ IN SOA example.com. root.example.com. ( 2 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL IN A 192.168.1.15 ; @ IN NS ns.example.com. ns IN A 192.168.1.15 serv1 IN A 192.168.1.1 serv2 IN A 192.168.1.2 La premier paragraphe correspond √† l‚Äôenregistrement SOA, on peut le laisser tel quel.\nDans le deuxi√®me paragraphe, on va donner des informations √† notre serveur DNS, c‚Äôest-√†-dire , qu‚Äôon va rentrer manuellement des noms de machines et leurs IP utiles √† mon serveur.\n‚ö† Il est fortement recommand√© de faire l‚Äôenregistrement NS, c‚Äôest la norme.\nPremi√®rement, j‚Äôai donner √† mon serveur DNS les IP des autres serveurs DNS du domaine example.com (c‚Äôest l‚Äôenregistrement NS). Malgr√© le fait qu‚Äôil n‚Äôy en ai qu‚Äôun seul (mon serveur DNS), je le met quand m√™me.\nEnsuite, j‚Äôai d√©clar√© 2 serveurs web, serv1 et serv2.\nJe rappelle qu‚Äôil faudra adapter cette configuration en fonction de ces besoins, celle-la n‚Äôest qu‚Äôun exemple.\nSi notre Serveur DNS n‚Äôest pas capable de r√©soudre certain nom de domaine, il faut qu‚Äôil envoie ces requ√™tes √† d‚Äôautre DNS qui pourront le faire. Il nous faudra pour cela configurer la r√©cursion. Ajoutez ces lignes dans le fichier \u0026ldquo;named.conf.options\u0026rdquo;:\nacl goodclients { 172.25.0.0/16 172.16.0.0/16 10.54.0.0/16 192.168.0.0/24 localhost options { forwarders { 8.8.8.8; 172.25.254.12; 172.25.254.15; recursion yes; allow-recursion { goodclients; }; allow-query { any; }; }; Vous devriez avoir maintenant un DNS fonctionnel! üòÅ\n","permalink":"https://www.thomaswimart.fr/fr/notes/linux-dns/","summary":"Installer Bind9 :\nsudo apt-get install bind9\nLes fichiers de configuration de Bind9 sont dans /etc/bind/\ncd /etc/bind/ Tout d‚Äôabord, on met cet 3 lignes dans le fichier named.conf :\ninclude \u0026#34;/etc/bind/named.conf.options\u0026#34;; include \u0026#34;/etc/bind/named.conf.local\u0026#34;; include \u0026#34;/etc/bind/named.conf.default-zones\u0026#34;; -Dans le fichier de configuration de bind9 ¬´ named.conf.local ¬ª, d√©clarer ses zones :\nzone \u0026#34;example.com\u0026#34; { type master; file \u0026#34;/etc/bind/db.example.com\u0026#34;; }; ‚Üí La ligne \u0026ldquo;file\u0026rdquo; pr√©cise que la configuration de notre zone example.com se fera dans le fichier ¬´ db.","title":"Cr√©er et configurer un serveur DNS sur Linux avec Bind9"},{"content":"Configuration basique Passer en mode privil√©gi√©, puis configuration du terminal:\nSwitch\u0026gt;en Switch#conf t D√©finir le nom du switch, ainsi que le domaine auquel il appartient (optionnel).\nSwitch(config)# Switch(config)# hostname SwitchToto SwitchToto(config)# ip domain-name exempledomaine.local SwitchToto(config)# end D√©finir l\u0026rsquo;addressage IP du switch. Pour cela, on doit cr√©er un VLAN d√©di√© √† la configuration du switch (ici le vlan 10). L\u0026rsquo;IP que nous allons d√©finir sera donc associ√© √† ce VLAN. Cr√©er le VLAN:\nSwitchToto(config)# vlan 10 SwitchToto(config-vlan)# exit Puis d√©finir la configuration IP:\nAddresse IP: 192.168.10.1 Masque de sous-r√©seau: 255.255.255.0 Passerelle par d√©faut: 192.168.10.254 SwitchToto(config)# interface vlan 10 SwitchToto(config-if)# ip address 192.168.10.1 255.255.255.0 SwitchToto(config-if)# ex SwitchToto(config)# ip default-gateway 192.168.10.254 Pour voir la configuration de notre vlan d\u0026rsquo;administration:\nSwitchToto# sh run int vlan 10 Pour supprimer l\u0026rsquo;addresse IP, son masque, ainsi que la passerelle par d√©faut:\nSwitchToto(config)# interface vlan 10 SwitchToto(config-if)# no ip address SwitchToto(config-if)# ex SwitchToto(config)# no ip default-gateway Il faut maintenant s√©curiser notre Switch. M√™me si cette √©tape est optionnelle, je vous la recommande fortement.\nOn va tout d\u0026rsquo;abord masquer les futurs mots de passe que nous allons mettre sur ce switch, de mani√®re √† ce qu\u0026rsquo;ils ne s\u0026rsquo;affichent pas √† l\u0026rsquo;√©cran m√™me lors d\u0026rsquo;un show running config. On va donc ajouter le service password-encryption.\nSwitch(config)# service password-encryption Puis nous pouvons d√©finir le mot de passe qui sera demand√© lorsque l\u0026rsquo;on voudra acc√®der au mode priviligi√©:\nSwitchToto(config)# enable secret P@55w0rd D√©sormais, si je veux rentrer dans le mode privil√©gi√©, il faudra que j\u0026rsquo;inscrive le mot de passe \u0026ldquo;P@55w0rd\u0026rdquo; (qui est d\u0026rsquo;ailleur un tr√®s mauvais mot de passe).\nSauvegarder la configuration Explication Les commutateur Cisco poss√®de 2 configurations: la \u0026ldquo;running-config\u0026rdquo; et la \u0026ldquo;startup-config\u0026rdquo;. Lorsque le switch d√©marre, il utilise sa \u0026ldquo;startup-config\u0026rdquo;. Si des changements de configuration sont cr√©es, ils se feront dans la \u0026ldquo;running-config\u0026rdquo;. Le commutateur utilisera alors sa \u0026ldquo;running-config\u0026rdquo;. En revanche, si les changements op√©r√©s se r√©velent √™tre un √©chec, il suffit de le red√©marrer. Ainsi, le switch utilisera sa \u0026ldquo;startup-config\u0026rdquo;, qui n\u0026rsquo;a donc pas chang√©e. Lorsque l\u0026rsquo;on est certain des changements faits, on peut copier la \u0026ldquo;running-config\u0026rdquo; dans la \u0026ldquo;startup-config\u0026rdquo;. Les changements seront alors pris en compte dans la config par d√©faut, de d√©marrage, du commutateur.\nCommandes SwitchToto# copy running-config starting-config Destination filename [startup-config]? Building configuration... [OK] 0 bytes copied in 0.923 secs (0 bytes/sec) SwitchToto# write Building configuration... [OK] SwitchToto# Vous devriez maintenant avoir un switch configur√© et s√©curis√© ! üòä\n","permalink":"https://www.thomaswimart.fr/fr/notes/cisco-config/","summary":"Configuration basique Passer en mode privil√©gi√©, puis configuration du terminal:\nSwitch\u0026gt;en Switch#conf t D√©finir le nom du switch, ainsi que le domaine auquel il appartient (optionnel).\nSwitch(config)# Switch(config)# hostname SwitchToto SwitchToto(config)# ip domain-name exempledomaine.local SwitchToto(config)# end D√©finir l\u0026rsquo;addressage IP du switch. Pour cela, on doit cr√©er un VLAN d√©di√© √† la configuration du switch (ici le vlan 10). L\u0026rsquo;IP que nous allons d√©finir sera donc associ√© √† ce VLAN. Cr√©er le VLAN:","title":"Configuration de base pour un commutateur Cisco "},{"content":"√Ä propos de moi Je m\u0026rsquo;appelle Thomas, et j\u0026rsquo;habite √† Amiens, en France. Actuellement √©tudiant en informatique, je m\u0026rsquo;int√©resse de pr√®s √† l\u0026rsquo;admninistration des r√©seaux informatique, ainsi qu\u0026rsquo;√† la cybers√©curit√©. Ce site me sert √† la fois de portfolio, mais aussi de notes personnelles qui me servent pour les missions que je dois accomplir pour mes √©tudes.\nMes projets La conception et la maintenance de ce site constituent d√©ja un projet en soi: en effet le d√©vellopement web n\u0026rsquo;est pas vraiment mon point fort. Il m\u0026rsquo;a fallu beaucoup de temps pour faire fonctionner ce site\u0026hellip; Mais j\u0026rsquo;ai beaucoup appris üôÇ.\nMes certifications Je suis titulaire d\u0026rsquo;une certification Cisco Netacad NDG Linux Essential. Cette certification atteste de mes connaissances des commandes basiques de Linux.\nMon CV Vous pouvez t√©l√©charger mon CV ici.\n","permalink":"https://www.thomaswimart.fr/fr/french/porfolio/","summary":"√Ä propos de moi Je m\u0026rsquo;appelle Thomas, et j\u0026rsquo;habite √† Amiens, en France. Actuellement √©tudiant en informatique, je m\u0026rsquo;int√©resse de pr√®s √† l\u0026rsquo;admninistration des r√©seaux informatique, ainsi qu\u0026rsquo;√† la cybers√©curit√©. Ce site me sert √† la fois de portfolio, mais aussi de notes personnelles qui me servent pour les missions que je dois accomplir pour mes √©tudes.\nMes projets La conception et la maintenance de ce site constituent d√©ja un projet en soi: en effet le d√©vellopement web n\u0026rsquo;est pas vraiment mon point fort.","title":"Mon Portfolio"},{"content":"- hugo new site sitename -f yml Permet de cr√©er les fichiers de base pour la cr√©ation d\u0026rsquo;un nouveau site web. L\u0026rsquo;option \u0026ldquo;-f yml\u0026rdquo; va forcer la cr√©ation du fichier de configuration principal en .yml (ce que je recommande).\n- hugo server Permet de d√©marrer le serveur web local de hugo: cela va nous permettre de voir en direct les modifications apport√©es √† notre site web. Il faut ex√©cuter cette commande dans la racine de notre site web.\n- hugo new posts/filename.md Permet de cr√©er un nouveau post. L\u0026rsquo;extension .md pr√©cise qu\u0026rsquo;on va utiliser la syntaxe Markdown.\n","permalink":"https://www.thomaswimart.fr/fr/notes/hugo-commands/","summary":"- hugo new site sitename -f yml Permet de cr√©er les fichiers de base pour la cr√©ation d\u0026rsquo;un nouveau site web. L\u0026rsquo;option \u0026ldquo;-f yml\u0026rdquo; va forcer la cr√©ation du fichier de configuration principal en .yml (ce que je recommande).\n- hugo server Permet de d√©marrer le serveur web local de hugo: cela va nous permettre de voir en direct les modifications apport√©es √† notre site web. Il faut ex√©cuter cette commande dans la racine de notre site web.","title":"Commandes de base Hugo"}]