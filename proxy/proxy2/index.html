<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Create a proxy server with Pfsense and Squid(Part 2) | WIMART Thomas</title><meta name=keywords content><meta name=description content="The different parts of this tutorial:
Part-1 Part-2 Part-3 Part-4 Part-5 Installation de Pfsense Cliquez sur &ldquo;Accept&rdquo;.
S√©lectionnez &ldquo;Install&rdquo;, puis &ldquo;OK&rdquo;
L&rsquo;installateur va alors vous demander de s√©lectionner la disposition de votre clavier (j&rsquo;ai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur &ldquo;Select&rdquo;.
Confirmez votre choix.
On nous demande ensuite comment partionner notre disque. Choisissez &ldquo;Auto (UFS) BIOS&rdquo;, puis &ldquo;OK&rdquo;.
Pfsense va alors d√©marrer son installation:"><meta name=author content="Thomas"><link rel=canonical href=https://twimart.github.io/proxy/proxy2/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://twimart.github.io/favicon.ico/><link rel=icon type=image/png sizes=16x16 href=https://twimart.github.io/favicon-16x16.png/><link rel=icon type=image/png sizes=32x32 href=https://twimart.github.io/favicon-32x32.png/><link rel=apple-touch-icon href=https://twimart.github.io/apple-touch-icon.png/><link rel=mask-icon href=https://twimart.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://twimart.github.io/proxy/proxy2/><link rel=alternate hreflang=fr href=https://twimart.github.io/fr/proxy/proxy2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Create a proxy server with Pfsense and Squid(Part 2)"><meta property="og:description" content="The different parts of this tutorial:
Part-1 Part-2 Part-3 Part-4 Part-5 Installation de Pfsense Cliquez sur &ldquo;Accept&rdquo;.
S√©lectionnez &ldquo;Install&rdquo;, puis &ldquo;OK&rdquo;
L&rsquo;installateur va alors vous demander de s√©lectionner la disposition de votre clavier (j&rsquo;ai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur &ldquo;Select&rdquo;.
Confirmez votre choix.
On nous demande ensuite comment partionner notre disque. Choisissez &ldquo;Auto (UFS) BIOS&rdquo;, puis &ldquo;OK&rdquo;.
Pfsense va alors d√©marrer son installation:"><meta property="og:type" content="article"><meta property="og:url" content="https://twimart.github.io/proxy/proxy2/"><meta property="article:section" content="proxy"><meta property="article:published_time" content="2022-12-06T10:55:47+01:00"><meta property="article:modified_time" content="2022-12-06T10:55:47+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create a proxy server with Pfsense and Squid(Part 2)"><meta name=twitter:description content="The different parts of this tutorial:
Part-1 Part-2 Part-3 Part-4 Part-5 Installation de Pfsense Cliquez sur &ldquo;Accept&rdquo;.
S√©lectionnez &ldquo;Install&rdquo;, puis &ldquo;OK&rdquo;
L&rsquo;installateur va alors vous demander de s√©lectionner la disposition de votre clavier (j&rsquo;ai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur &ldquo;Select&rdquo;.
Confirmez votre choix.
On nous demande ensuite comment partionner notre disque. Choisissez &ldquo;Auto (UFS) BIOS&rdquo;, puis &ldquo;OK&rdquo;.
Pfsense va alors d√©marrer son installation:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Proxies","item":"https://twimart.github.io/proxy/"},{"@type":"ListItem","position":2,"name":"Create a proxy server with Pfsense and Squid(Part 2)","item":"https://twimart.github.io/proxy/proxy2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Create a proxy server with Pfsense and Squid(Part 2)","name":"Create a proxy server with Pfsense and Squid(Part 2)","description":"The different parts of this tutorial:\nPart-1 Part-2 Part-3 Part-4 Part-5 Installation de Pfsense Cliquez sur \u0026ldquo;Accept\u0026rdquo;.\nS√©lectionnez \u0026ldquo;Install\u0026rdquo;, puis \u0026ldquo;OK\u0026rdquo;\nL\u0026rsquo;installateur va alors vous demander de s√©lectionner la disposition de votre clavier (j\u0026rsquo;ai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur \u0026ldquo;Select\u0026rdquo;.\nConfirmez votre choix.\nOn nous demande ensuite comment partionner notre disque. Choisissez \u0026ldquo;Auto (UFS) BIOS\u0026rdquo;, puis \u0026ldquo;OK\u0026rdquo;.\nPfsense va alors d√©marrer son installation:","keywords":[],"articleBody":"The different parts of this tutorial:\nPart-1 Part-2 Part-3 Part-4 Part-5 Installation de Pfsense Cliquez sur ‚ÄúAccept‚Äù.\nS√©lectionnez ‚ÄúInstall‚Äù, puis ‚ÄúOK‚Äù\nL‚Äôinstallateur va alors vous demander de s√©lectionner la disposition de votre clavier (j‚Äôai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur ‚ÄúSelect‚Äù.\nConfirmez votre choix.\nOn nous demande ensuite comment partionner notre disque. Choisissez ‚ÄúAuto (UFS) BIOS‚Äù, puis ‚ÄúOK‚Äù.\nPfsense va alors d√©marrer son installation:\nSi l‚Äôinstallateur vous demande d‚Äôouvrir un Shell, r√©pondez ‚Äúnon‚Äù\nVous red√©marrerez la machine virtuelle quand l‚Äôinstallateur vous le proposera.\nConfiguration de d√©marrage de Pfsense Au red√©marrage, on vous demandera si les VLANS doivent √™tre configur√©s. Appuyez sur ‚Äún‚Äù puis ‚ÄúEnter‚Äù\nEnsuite, vous devez dire √† Pfsense quelles interfaces correspondent au WAN et au LAN. Pour l‚Äôinstant, on ne sait pas √† quoi correspond ‚Äúem0‚Äù et ‚Äúem1‚Äù donc mettons au hasard (on pourra modifier cela plus tard).\nPuis confirmer en appuyant sur ‚Äúy‚Äù:\nEt nous avons enfin fini l‚Äôinstallation de Pfsense! Vous devrez maintenant arriver sur le menu de configuration principal.\nPas de panique si vous n‚Äôavez pas d‚Äôadresses IP pour ‚Äúem1‚Äù ou ‚Äúem0‚Äù (comme moi), on va r√®gler cela tout de suite!\nAppuyer sur la touche ‚Äú1‚Äù du clavier afin d‚Äôassigner les interfaces correctement.\nNous remarquons alors qu‚Äô√† cot√© de ‚Äúem0‚Äù et ‚Äúem1‚Äù, il y a des adresses MAC‚Ä¶\nL‚Äôassistant nous (re)demande si nous voulons confiugurer les VLANS. Appuyer sur ‚Äún‚Äù.\nPuis on nous demande quel interface correspond au WAN. Mais comment le savoir? ‚Äúem0‚Äù? ‚Äúem1‚Äù? Une petite explication s‚Äôimpose.\nLorsque nous avons configur√© les interfaces de la VM de Pfsense, nous en avons mis une en ‚ÄúLAN segment‚Äù et une autre en ‚ÄúBridged‚Äù. Celle en ‚ÄúLAN segment‚Äù correspond au cot√© LAN de Pfsense, tandis que la ‚ÄúBridged‚Äù correspond au cot√© WAN.\nMais comment savoir laquelle correspond √† ‚Äúem0‚Äù ou √† ‚Äúem1‚Äù? Avec les adresses MAC que vous avez normalement not√© un peu plus t√¥t ! Dans mon cas, je sais donc que l‚Äôinterface LAN a une adresse MAC qui se finit par :d9:f4 ; et que celle de l‚Äôinterface WAN se termine par :6a:69.\nC‚Äôest marqu√© juste au dessus laquelle correspond √† quoi.\nVous pouvez donc entrer l‚Äôinterface qui correspond au cot√© WAN (dans mon cas, ‚Äúem0‚Äù):\nFaites de m√™me avec l‚Äôinterface LAN:\nAppuyer sur ‚Äúy‚Äù pour confirmer les changements:\nPersonnellement, je vais changer l‚Äôadresse IP de mon interface LAN, je vais donc choisir l‚Äôoption 2:\nJe vais lui donner l‚Äôaddresse IP 192.168.100.254, avec un masque en /24. (Je sp√©cifie aussi que je ne veux pas utiliser le DHCP.) Si on vous propose d‚Äôutiliser le protocole HTTP poour le WebConfigurator, appuyez sur ‚Äúy‚Äù.\nOn passera ensuite √† la configuration de PC1!\nLa suite du tutoriel ‚û°Ô∏è ici ‚¨ÖÔ∏è.\n","wordCount":"449","inLanguage":"en","datePublished":"2022-12-06T10:55:47+01:00","dateModified":"2022-12-06T10:55:47+01:00","author":{"@type":"Person","name":"Thomas"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://twimart.github.io/proxy/proxy2/"},"publisher":{"@type":"Organization","name":"WIMART Thomas","logo":{"@type":"ImageObject","url":"https://twimart.github.io/favicon.ico/"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://twimart.github.io/ accesskey=h title="WIMART Thomas (Alt + H)"><img src=https://twimart.github.io/apple-touch-icon.png alt aria-label=logo height=30>WIMART Thomas</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://twimart.github.io/fr/ title=French aria-label="üåç FR ">üåç FR</a></li></ul></div></div><ul id=menu><li><a href=https://twimart.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://twimart.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://twimart.github.io/search/ title="Search üîç (Alt + /)" accesskey=/><span>Search üîç</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Create a proxy server with Pfsense and Squid(Part 2)</h1><div class=post-meta><span title='2022-12-06 10:55:47 +0100 +0100'>December 6, 2022</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;Thomas&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://twimart.github.io/fr/proxy/proxy2/>üåç FR</a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#installation-de-pfsense aria-label="Installation de Pfsense">Installation de Pfsense</a></li><li><a href=#configuration-de-d%c3%a9marrage-de-pfsense aria-label="Configuration de d√©marrage de Pfsense">Configuration de d√©marrage de Pfsense</a></li></ul></div></details></div><div class=post-content><p>The different parts of this tutorial:</p><ul><li><a href=/posts/proxy>Part-1</a></li><li><a href=/proxy/proxy2>Part-2</a></li><li><a href=/proxy/proxy3>Part-3</a></li><li><a href=/proxy/proxy4>Part-4</a></li><li><a href=/proxy/proxy5>Part-5</a></li></ul><h2 id=installation-de-pfsense>Installation de Pfsense<a hidden class=anchor aria-hidden=true href=#installation-de-pfsense>#</a></h2><p><img loading=lazy src=/images/pfsense/pfsense1.png alt=pfsense1></p><p>Cliquez sur &ldquo;Accept&rdquo;.</p><p><img loading=lazy src=/images/pfsense/pfsense2.png alt=pfsense2></p><p>S√©lectionnez &ldquo;Install&rdquo;, puis &ldquo;OK&rdquo;</p><p>L&rsquo;installateur va alors vous demander de s√©lectionner la disposition de votre clavier (j&rsquo;ai un clavier fran√ßais). S√©lectionnez la disposition qui vous convient, puis appuyez sur &ldquo;Select&rdquo;.</p><p><img loading=lazy src=/images/pfsense/pfsense3.png alt=pfsense3></p><p>Confirmez votre choix.</p><p><img loading=lazy src=/images/pfsense/pfsense4.png alt=pfsense4></p><p>On nous demande ensuite comment partionner notre disque. Choisissez &ldquo;Auto (UFS) BIOS&rdquo;, puis &ldquo;OK&rdquo;.</p><p><img loading=lazy src=/images/pfsense/pfsense5.png alt=pfsense5></p><p>Pfsense va alors d√©marrer son installation:</p><p><img loading=lazy src=/images/pfsense/pfsense6.png alt=pfsense6></p><p>Si l&rsquo;installateur vous demande d&rsquo;ouvrir un Shell, r√©pondez &ldquo;non&rdquo;</p><p>Vous red√©marrerez la machine virtuelle quand l&rsquo;installateur vous le proposera.</p><h2 id=configuration-de-d√©marrage-de-pfsense>Configuration de d√©marrage de Pfsense<a hidden class=anchor aria-hidden=true href=#configuration-de-d√©marrage-de-pfsense>#</a></h2><p>Au red√©marrage, on vous demandera si les VLANS doivent √™tre configur√©s. Appuyez sur &ldquo;n&rdquo; puis &ldquo;Enter&rdquo;</p><p><img loading=lazy src=/images/pfsense/pfsense7.png alt=pfsense7></p><p>Ensuite, vous devez dire √† Pfsense quelles interfaces correspondent au WAN et au LAN. Pour l&rsquo;instant, on ne sait pas √† quoi correspond &ldquo;em0&rdquo; et &ldquo;em1&rdquo; donc mettons au hasard (on pourra modifier cela plus tard).</p><p><img loading=lazy src=/images/pfsense/pfsense8.png alt=pfsense8></p><p>Puis confirmer en appuyant sur &ldquo;y&rdquo;:</p><p><img loading=lazy src=/images/pfsense/pfsense9.png alt=pfsense9></p><p>Et nous avons enfin fini l&rsquo;installation de Pfsense! Vous devrez maintenant arriver sur le menu de configuration principal.</p><p><img loading=lazy src=/images/pfsense/pfsense10.png alt=pfsense10></p><p>Pas de panique si vous n&rsquo;avez pas d&rsquo;adresses IP pour &ldquo;em1&rdquo; ou &ldquo;em0&rdquo; (comme moi), on va r√®gler cela tout de suite!</p><p>Appuyer sur la touche &ldquo;1&rdquo; du clavier afin d&rsquo;assigner les interfaces correctement.</p><p><img loading=lazy src=/images/pfsense/pfsense11.png alt=pfsense11></p><p>Nous remarquons alors qu&rsquo;√† cot√© de &ldquo;em0&rdquo; et &ldquo;em1&rdquo;, il y a des adresses MAC&mldr;</p><p>L&rsquo;assistant nous (re)demande si nous voulons confiugurer les VLANS. Appuyer sur &ldquo;n&rdquo;.</p><p>Puis on nous demande quel interface correspond au WAN. Mais comment le savoir? &ldquo;em0&rdquo;? &ldquo;em1&rdquo;? Une petite explication s&rsquo;impose.</p><p>Lorsque nous avons configur√© les interfaces de la VM de Pfsense, nous en avons mis une en &ldquo;LAN segment&rdquo; et une autre en &ldquo;Bridged&rdquo;. Celle en &ldquo;LAN segment&rdquo; correspond au cot√© LAN de Pfsense, tandis que la &ldquo;Bridged&rdquo; correspond au cot√© WAN.</p><p>Mais comment savoir laquelle correspond √† &ldquo;em0&rdquo; ou √† &ldquo;em1&rdquo;? Avec les adresses MAC que vous avez normalement not√© un peu plus t√¥t ! Dans mon cas, je sais donc que l&rsquo;interface LAN a une adresse MAC qui se finit par :d9:f4 ; et que celle de l&rsquo;interface WAN se termine par :6a:69.</p><p>C&rsquo;est marqu√© juste au dessus laquelle correspond √† quoi.</p><p>Vous pouvez donc entrer l&rsquo;interface qui correspond au cot√© WAN (dans mon cas, &ldquo;em0&rdquo;):</p><p><img loading=lazy src=/images/pfsense/pfsense12.png alt=pfsense12></p><p>Faites de m√™me avec l&rsquo;interface LAN:</p><p><img loading=lazy src=/images/pfsense/pfsense13.png alt=pfsense13></p><p>Appuyer sur &ldquo;y&rdquo; pour confirmer les changements:</p><p><img loading=lazy src=/images/pfsense/pfsense14.png alt=pfsense14></p><p>Personnellement, je vais changer l&rsquo;adresse IP de mon interface LAN, je vais donc choisir l&rsquo;option 2:</p><p><img loading=lazy src=/images/pfsense/pfsense15.png alt=pfsense15></p><p>Je vais lui donner l&rsquo;addresse IP 192.168.100.254, avec un masque en /24. (Je sp√©cifie aussi que je ne veux pas utiliser le DHCP.)<br>Si on vous propose d&rsquo;utiliser le protocole HTTP poour le WebConfigurator, appuyez sur &ldquo;y&rdquo;.</p><p><img loading=lazy src=/images/pfsense/pfsense16.png alt=pfsense16></p><p>On passera ensuite √† la configuration de PC1!</p><p><em><strong>La suite du tutoriel ‚û°Ô∏è <a href=/fr/proxy/proxy3>ici</a> ‚¨ÖÔ∏è.</strong></em></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://twimart.github.io/>WIMART Thomas</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>