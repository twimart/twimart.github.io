<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Set up an SSH connection on a Cisco device | WIMART Thomas</title>
<meta name="keywords" content="cisco, ssh">
<meta name="description" content="Creation of user names, domains, and keys (Here we take an exemple of Cisco router.)
Firstly, if you haven&rsquo;t already done so, give your device a personalized name and a domain name:
Router(config)# hostname TotoToto(config)# ip domain-name exemple.com Remember to secure the privileged mode of your device!
Toto(config)# enable secret &lt;mot_de_passe&gt; Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection).">
<meta name="author" content="Thomas">
<link rel="canonical" href="https://twimart.github.io/posts/cisco-ssh/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3299c596a7007118365635c056dd427dace22b7b8c1341fdef6fa6c31359ba10.css" integrity="sha256-MpnFlqcAcRg2VjXAVt1CfaziK3uME0H972&#43;mwxNZuhA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://twimart.github.io/favicon.ico/">
<link rel="icon" type="image/png" sizes="16x16" href="https://twimart.github.io/favicon-16x16.png/">
<link rel="icon" type="image/png" sizes="32x32" href="https://twimart.github.io/favicon-32x32.png/">
<link rel="apple-touch-icon" href="https://twimart.github.io/apple-touch-icon.png/">
<link rel="mask-icon" href="https://twimart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://twimart.github.io/posts/cisco-ssh/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Set up an SSH connection on a Cisco device" />
<meta property="og:description" content="Creation of user names, domains, and keys (Here we take an exemple of Cisco router.)
Firstly, if you haven&rsquo;t already done so, give your device a personalized name and a domain name:
Router(config)# hostname TotoToto(config)# ip domain-name exemple.com Remember to secure the privileged mode of your device!
Toto(config)# enable secret &lt;mot_de_passe&gt; Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://twimart.github.io/posts/cisco-ssh/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-17T13:39:04+01:00" />
<meta property="article:modified_time" content="2022-11-17T13:39:04+01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Set up an SSH connection on a Cisco device"/>
<meta name="twitter:description" content="Creation of user names, domains, and keys (Here we take an exemple of Cisco router.)
Firstly, if you haven&rsquo;t already done so, give your device a personalized name and a domain name:
Router(config)# hostname TotoToto(config)# ip domain-name exemple.com Remember to secure the privileged mode of your device!
Toto(config)# enable secret &lt;mot_de_passe&gt; Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection)."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://twimart.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Set up an SSH connection on a Cisco device",
      "item": "https://twimart.github.io/posts/cisco-ssh/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Set up an SSH connection on a Cisco device",
  "name": "Set up an SSH connection on a Cisco device",
  "description": "Creation of user names, domains, and keys (Here we take an exemple of Cisco router.)\nFirstly, if you haven\u0026rsquo;t already done so, give your device a personalized name and a domain name:\nRouter(config)# hostname Toto\rToto(config)# ip domain-name exemple.com Remember to secure the privileged mode of your device!\nToto(config)# enable secret \u0026lt;mot_de_passe\u0026gt; Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection).",
  "keywords": [
    "cisco", "ssh"
  ],
  "articleBody": "Creation of user names, domains, and keys (Here we take an exemple of Cisco router.)\nFirstly, if you haven‚Äôt already done so, give your device a personalized name and a domain name:\nRouter(config)# hostname Toto\rToto(config)# ip domain-name exemple.com Remember to secure the privileged mode of your device!\nToto(config)# enable secret Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection). We also need to encrypt these keys, we gonna use RSA protocol to do that:\nToto(config)# crypto key generate rsa We will then be asked to the desired size of the key. Personnaly, I put 1024 bits.\nThe name for the keys will be: Toto.exemple.com\rChoose the size of the key modulus in the range of 360 to 2048 for your\rGeneral Purpose Keys. Choosing a key modulus greater than 512 may take a few minutes.\rHow many bits in the modulus [512]: 1024\r% Generating 1024 bit RSA keys, keys will be non-exportable. . . [OK]\rToto(config)# We will now create a user, it is with his logins that we can connect to the router (or switch) remotely. Here, I put thomas for the username and admin for the password, but of course you can put any value you want.\nToto(config)# username thomas password admin Enabling the SSH protocol On peut maintenant activer le protocole SSH sur notre routeur (ou switch): We can enable the SSH protocol on our device:\nToto(config)# ip ssh version 2 A brief note on the commands that will follow: To connect to a remote device, there are two main protocols: Telnet and SSH. Telnet is a simple protocol that works well, but is not at all secure and encrypted: this means that anyone can intercept the communication frames between you and the device.\nSSH is encrypted (thanks to the keys we generated earlier). The standard is that we force our device to communicate only in SSH, and so the connection in Telnet is impossible (for more security).\nThis is what we are going to do now:\nWe will first force our switch to accept only incoming SSH communication:\nToto(config)# line vty 0 4\rToto(config-line)# transport input ssh Then we do the same for the outgoing communication:\nToto(config-line)# transport output ssh Now, we can check the configuration changes:\nToto# show running-config Remember to save the new configuration!\nToto# copy running-config startup-config Connection test (with PuTTy) PuTTy is a free software that allows you to connect to a device in many different ways: serial cable, Telnet, SSH‚Ä¶ You can select SSH, then enter the IP address of your Cisco device (mine was 192.168.100.33):\nYou will then be asked for a username. You can put the one you created before (in my case thomas). Then you can enter the corresponding password for that user (in my case it‚Äôs admin).\nAnd you finally connected!\nYou will be asked for a password if you want to enter the privileged mode. That‚Äôs the one you put during the enable secret command.\nThat‚Äôs all for the SSH connection on Cisco üòÅ!\n",
  "wordCount" : "513",
  "inLanguage": "en",
  "datePublished": "2022-11-17T13:39:04+01:00",
  "dateModified": "2022-11-17T13:39:04+01:00",
  "author":{
    "@type": "Person",
    "name": "Thomas"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://twimart.github.io/posts/cisco-ssh/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WIMART Thomas",
    "logo": {
      "@type": "ImageObject",
      "url": "https://twimart.github.io/favicon.ico/"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://twimart.github.io/" accesskey="h" title="WIMART Thomas (Alt + H)">
                <img src="https://twimart.github.io/apple-touch-icon.png" alt="" aria-label="logo"
                    height="30">WIMART Thomas</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://twimart.github.io/fr/" title="French"
                            aria-label="üåç FR ">üåç FR </a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://twimart.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://twimart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://twimart.github.io/search/" title="Search üîç (Alt &#43; /)" accesskey=/>
                    <span>Search üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://twimart.github.io/">Home</a>&nbsp;¬ª&nbsp;<a href="https://twimart.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      Set up an SSH connection on a Cisco device
    </h1>
    <div class="post-meta"><span title='2022-11-17 13:39:04 +0100 CET'>November 17, 2022</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;Thomas

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#creation-of-user-names-domains-and-keys" aria-label="Creation of user names, domains, and keys">Creation of user names, domains, and keys</a></li>
                <li>
                    <a href="#enabling-the-ssh-protocol" aria-label="Enabling the SSH protocol">Enabling the SSH protocol</a><ul>
                        
                <li>
                    <a href="#a-brief-note-on-the-commands-that-will-follow" aria-label="A brief note on the commands that will follow:">A brief note on the commands that will follow:</a></li></ul>
                </li>
                <li>
                    <a href="#connection-test-with-putty" aria-label="Connection test (with PuTTy)">Connection test (with PuTTy)</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="creation-of-user-names-domains-and-keys">Creation of user names, domains, and keys<a hidden class="anchor" aria-hidden="true" href="#creation-of-user-names-domains-and-keys">#</a></h2>
<p>(Here we take an exemple of Cisco router.)</p>
<p>Firstly, if you haven&rsquo;t already done so, give your device a personalized name and a domain name:</p>
<pre tabindex="0"><code>Router(config)# hostname Toto
Toto(config)# ip domain-name exemple.com
</code></pre><p>Remember to secure the privileged mode of your device!</p>
<pre tabindex="0"><code>Toto(config)# enable secret &lt;mot_de_passe&gt;
</code></pre><p>Then, we have to tell to our router (or switch) to generate aymetric key pair (required to the SSH connection).
We also need to encrypt these keys, we gonna use RSA protocol to do that:</p>
<pre tabindex="0"><code>Toto(config)# crypto key generate rsa
</code></pre><p>We will then be asked to the desired size of the key. Personnaly, I put <code>1024</code> bits.</p>
<pre tabindex="0"><code>The name for the keys will be: Toto.exemple.com
Choose the size of the key modulus in the range of 360 to 2048 for your
General Purpose Keys. Choosing a key modulus greater than 512 may take a few minutes.

How many bits in the modulus [512]: 1024
% Generating 1024 bit RSA keys, keys will be non-exportable. . . [OK]

Toto(config)# 
</code></pre><p>We will now create a user, it is with his logins that we can connect to the router (or switch) remotely.
Here, I put <code>thomas</code> for the username and <code>admin</code> for the password, <strong>but of course you can put any value you want.</strong></p>
<pre tabindex="0"><code>Toto(config)# username thomas password admin
</code></pre><h2 id="enabling-the-ssh-protocol">Enabling the SSH protocol<a hidden class="anchor" aria-hidden="true" href="#enabling-the-ssh-protocol">#</a></h2>
<p>On peut maintenant activer le protocole SSH sur notre routeur (ou switch):
We can enable the SSH protocol on our device:</p>
<pre tabindex="0"><code>Toto(config)# ip ssh version 2
</code></pre><h3 id="a-brief-note-on-the-commands-that-will-follow">A brief note on the commands that will follow:<a hidden class="anchor" aria-hidden="true" href="#a-brief-note-on-the-commands-that-will-follow">#</a></h3>
<p>To connect to a remote device, there are two main protocols: <code>Telnet</code> and <code>SSH</code>. Telnet is a simple protocol that works well, but is not at all secure and encrypted: this means that anyone can intercept the communication frames between you and the device.</p>
<p>SSH is encrypted (thanks to the keys we generated earlier). The standard is that we force our device to communicate only in SSH, and so the connection in Telnet is impossible (for more security).</p>
<p>This is what we are going to do now:</p>
<p>We will first force our switch to accept only incoming SSH communication:</p>
<pre tabindex="0"><code>Toto(config)# line vty 0 4
Toto(config-line)# transport input ssh
</code></pre><p>Then we do the same for the outgoing communication:</p>
<pre tabindex="0"><code>Toto(config-line)# transport output ssh
</code></pre><p>Now, we can check the configuration changes:</p>
<pre tabindex="0"><code>Toto# show running-config
</code></pre><p>Remember to save the new configuration!</p>
<pre tabindex="0"><code>Toto# copy running-config startup-config 
</code></pre><h2 id="connection-test-with-putty">Connection test (with PuTTy)<a hidden class="anchor" aria-hidden="true" href="#connection-test-with-putty">#</a></h2>
<p>PuTTy is a free software that allows you to connect to a device in many different ways: serial cable, Telnet, SSH&hellip; <br>
You can select SSH, then enter the IP address of your Cisco device (mine was 192.168.100.33):</p>
<p><img loading="lazy" src="/images/putty.PNG" alt="putty"  />
</p>
<p>You will then be asked for a username. You can put the one you created before (in my case <code>thomas</code>).
Then you can enter the corresponding password for that user (in my case it&rsquo;s <code>admin</code>).</p>
<p>And you finally connected!</p>
<p><img loading="lazy" src="/images/ssh.PNG" alt="ssh"  />
</p>
<p>You will be asked for a password if you want to enter the privileged mode. That&rsquo;s the one you put during the <code>enable secret &lt;password&gt;</code> command.</p>
<p>That&rsquo;s all for the SSH connection on Cisco üòÅ!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://twimart.github.io/tags/cisco/">cisco</a></li>
      <li><a href="https://twimart.github.io/tags/ssh/">ssh</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://twimart.github.io/posts/linux-dns/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>Create and configure a DNS server on Linux with Bind9</span>
  </a>
  <a class="next" href="https://twimart.github.io/posts/hugo-commands/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>Hugo basic commands</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://twimart.github.io/">WIMART Thomas</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
